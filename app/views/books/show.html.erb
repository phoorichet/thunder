<div class="page-header">
  <%= link_to person_books_path(@book.person), class: 'btn btn-default' do %>
    <span class="glyphicon glyphicon-list-alt"></span>
    Back
  <% end %>
  <%= link_to edit_person_book_path(@book.person, @book), class: 'btn btn-primary' do %>
    <span class="glyphicon glyphicon-pencil"></span>
    Edit
  <% end %>
  <h1>Show book</h1>
</div>

<dl class="dl-horizontal">
  <dt>Number:</dt>
  <dd><%= @book.number %></dd>

  <dt>Begin at:</dt>
  <dd><%= @book.begin_at %></dd>

  <dt>End at:</dt>
  <dd><%= @book.end_at %></dd>

  <dt>Assured person:</dt>
  <dd><%= @book.assured_person.fullname if @book.assured_person %></dd>

  <dt>Payer person:</dt>
  <dd><%= @book.payer_person.fullname if @book.payer_person %></dd>

</dl>

<div class="page-header">
  <%= link_to new_main_book_insurances_path(@book), class: 'btn btn-primary' do %>
    <span class="glyphicon glyphicon-plus"></span>
    Add
  <% end %>
  <h1>Main Insurance</h1>
</div>

<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
            <th>Name</th>
            <th>Amount</th>
            <th>Premium</th>
            <th>Protection length</th>
            <th>Paid preriod length</th>
            <th>Consider year</th>
            <th>Consider gender</th>
            <th>Company</th>
            <th>Maximum Age</th>
            <th></th>
        <th></th>
        <th></th>
      </tr>
    </thead>

    <tbody>
      <%= content_tag_for(:tr, @book.main_insurance) do |insurance| %>
            <td><%= insurance.name %></td>
            <td><%= insurance.amount %></td>
            <td><%= insurance.premium %></td>
            <td><%= insurance.protection_length %></td>
            <td><%= insurance.paid_period_length %></td>
            <td><%= insurance.consider_year %></td>
            <td><%= insurance.consider_gender %></td>
            <td><%= insurance.company %></td>
            <td><%= insurance.maximum_cover_age %></td>
            <td><%= link_to 'Show', book_insurance_path(@book, @book.main_insurance) %></td>
            <td><%= link_to 'Edit', edit_book_insurance_path(@book, @book.main_insurance) %></td>
            <td><%= link_to 'Destroy', [@book, @book.main_insurance], method: :delete, data: { confirm: 'Are you sure?' } %></td>
      <% end %>
    </tbody>
  </table>
</div>


<div class="page-header">
  <%= link_to new_book_rider_path(@book), class: 'btn btn-primary' do %>
    <span class="glyphicon glyphicon-plus"></span>
    Add
  <% end %>
  <h1>Rider Insurance</h1>
</div>

<div class="table-responsive">
  <table class="table table-hover">
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Status</th>
      <th>Code name</th>
      <th>Premium</th>
      <th>Amount</th>
      <th>Maximum Age</th>
      <th>Tags</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @book.riders.each do |rider| %>
      <tr>
        <td><%= rider.name %></td>
        <td><%= rider.description %></td>
        <td><%= rider.status %></td>
        <td><%= rider.code_name %></td>
        <td><%= rider.premium %></td>
        <td><%= rider.amount %></td>
        <td><%= rider.maximum_cover_age %></td>
        <td><%= rider.tag_list %></td>
        <td><%= link_to 'Show', [rider.book, rider] %></td>
        <td><%= link_to 'Edit', edit_book_rider_path(rider.book, rider) %></td>
        <td><%= link_to 'Destroy', [rider.book, rider], method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>


<div class="page-header">
  <%= link_to new_book_pa_path(@book), class: 'btn btn-primary' do %>
    <span class="glyphicon glyphicon-plus"></span>
    Add
  <% end %>
  <h1>PA Insurance</h1>
</div>

<div class="table-responsive">
  <table class="table table-hover">
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Status</th>
      <th>Tags</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @book.pas.each do |pa| %>
      <tr>
        <td><%= pa.name %></td>
        <td><%= pa.description %></td>
        <td><%= pa.status %></td>
        <td><%= pa.tag_list %></td>
        <td><%= link_to 'Show', [pa.book, pa] %></td>
        <td><%= link_to 'Edit', edit_book_pa_path(pa.book, pa) %></td>
        <td><%= link_to 'Destroy', [pa.book, pa], method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>
